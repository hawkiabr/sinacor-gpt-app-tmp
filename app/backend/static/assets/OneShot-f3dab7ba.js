import{r as o,bn as se,bo as t}from"./vendor-541a2ba1.js";import{R as a,u as T,S as oe,Q as ne,E as ae,A as ie,a as h,b as re,c as ce,g as le,d as ue}from"./index-5299deaf.js";import{g as de,d as pe,D as he,T as U,e as me,C as m,f as Se}from"./fluentui-react-80203b24.js";import"./fluentui-icons-46c936f8.js";const ge="_oneshotContainer_p6613_1",xe="_oneshotTopSection_p6613_8",Ce="_oneshotBottomSection_p6613_15",_e="_oneshotTitle_p6613_25",ve="_oneshotQuestionInput_p6613_39",fe="_oneshotAnswerContainer_p6613_46",Te="_oneshotAnalysisPanel_p6613_53",be="_oneshotSettingsSeparator_p6613_58",ye="_settingsButton_p6613_62",n={oneshotContainer:ge,oneshotTopSection:xe,oneshotBottomSection:Ce,oneshotTitle:_e,oneshotQuestionInput:ve,oneshotAnswerContainer:fe,oneshotAnalysisPanel:Te,oneshotSettingsSeparator:be,settingsButton:ye};function Ae(){const[b,S]=o.useState(!1),[g,I]=o.useState(""),[y,je]=o.useState(""),[A,ke]=o.useState(""),[c,H]=o.useState(a.Hybrid),[j,O]=o.useState(3),[x,Q]=o.useState(!0),[k,q]=o.useState(!1),[P,D]=o.useState(""),[N,M]=o.useState(!1),[R,V]=o.useState(!1),C=o.useRef(""),[_,B]=o.useState(!1),[l,w]=o.useState(),[i,L]=o.useState(),[F,E]=o.useState(),[u,r]=o.useState(void 0),d=T?se().instance:void 0,v=async e=>{C.current=e,l&&w(void 0),B(!0),E(void 0),r(void 0);const s=d?await le(d):void 0;try{const p={messages:[{content:e,role:"user"}],context:{overrides:{prompt_template:g.length===0?void 0:g,prompt_template_prefix:y.length===0?void 0:y,prompt_template_suffix:A.length===0?void 0:A,exclude_category:P.length===0?void 0:P,top:j,retrieval_mode:c,semantic_ranker:x,semantic_captions:k,use_oid_security_filter:N,use_groups_security_filter:R}},session_state:i?i.choices[0].session_state:null},te=await ue(p,s?.accessToken);L(te)}catch(p){w(p)}finally{B(!1)}},G=(e,s)=>{I(s||"")},z=(e,s)=>{O(parseInt(s||"3"))},J=(e,s,p)=>{H(s?.data||a.Hybrid)},K=(e,s)=>{Q(!!s)},W=(e,s)=>{q(!!s)},X=(e,s)=>{D(s||"")},Y=e=>{v(e)},Z=e=>{F===e&&u===h.CitationTab?r(void 0):(E(e),r(h.CitationTab))},f=e=>{r(u===e?void 0:e)},$=(e,s)=>{M(!!s)},ee=(e,s)=>{V(!!s)};return t.jsxs("div",{className:n.oneshotContainer,children:[t.jsxs("div",{className:n.oneshotTopSection,children:[t.jsx(oe,{className:n.settingsButton,onClick:()=>S(!b)}),t.jsx("h1",{className:n.oneshotTitle,children:"Dúvidas sobre o Sinacor?"}),t.jsx("div",{className:n.oneshotQuestionInput,children:t.jsx(ne,{placeholder:"Digite uma pergunta (por exemplo, o que são os eventos corporativos?)",disabled:_,onSend:e=>v(e)})})]}),t.jsxs("div",{className:n.oneshotBottomSection,children:[_&&t.jsx(de,{label:"Respondendo"}),!C.current&&t.jsx(ae,{onExampleClicked:Y}),!_&&i&&!l&&t.jsx("div",{className:n.oneshotAnswerContainer,children:t.jsx(ie,{answer:i,isStreaming:!1,onCitationClicked:e=>Z(e),onThoughtProcessClicked:()=>f(h.ThoughtProcessTab),onSupportingContentClicked:()=>f(h.SupportingContentTab)})}),l?t.jsx("div",{className:n.oneshotAnswerContainer,children:t.jsx(re,{error:l.toString(),onRetry:()=>v(C.current)})}):null,u&&i&&t.jsx(ce,{className:n.oneshotAnalysisPanel,activeCitation:F,onActiveTabChanged:e=>f(e),citationHeight:"600px",answer:i,activeTab:u})]}),t.jsxs(pe,{headerText:"Configurar a geração de respostas",isOpen:b,isBlocking:!1,onDismiss:()=>S(!1),closeButtonAriaLabel:"Fechar",onRenderFooterContent:()=>t.jsx(he,{onClick:()=>S(!1),children:"Fechar"}),isFooterAtBottom:!0,children:[t.jsx(U,{className:n.oneshotSettingsSeparator,defaultValue:g,label:"Substituir modelo de prompt",multiline:!0,autoAdjustHeight:!0,onChange:G}),t.jsx(me,{className:n.oneshotSettingsSeparator,label:"Resultados de pesquisa a recuperar",min:1,max:50,defaultValue:j.toString(),onChange:z}),t.jsx(U,{className:n.oneshotSettingsSeparator,label:"Excluir categoria",onChange:X}),t.jsx(m,{className:n.oneshotSettingsSeparator,checked:x,label:"Usar classificador semântico na pesquisa",onChange:K}),t.jsx(m,{className:n.oneshotSettingsSeparator,checked:k,label:"Usar resumos contextuais de consulta em vez de documentos inteiros",onChange:W,disabled:!x}),T&&t.jsx(m,{className:n.oneshotSettingsSeparator,checked:N,label:"Filtro de segurança oid",disabled:!d?.getActiveAccount(),onChange:$}),T&&t.jsx(m,{className:n.oneshotSettingsSeparator,checked:R,label:"Filtro de segurança de grupos",disabled:!d?.getActiveAccount(),onChange:ee}),t.jsx(Se,{className:n.oneshotSettingsSeparator,label:"Modo de pesquisa",options:[{key:"hybrid",text:"Vetor + Texto (Híbrido)",selected:c==a.Hybrid,data:a.Hybrid},{key:"vectors",text:"Vetor",selected:c==a.Vectors,data:a.Vectors},{key:"text",text:"Texto",selected:c==a.Text,data:a.Text}],required:!0,onChange:J})]})]})}Ae.displayName="OneShot";export{Ae as Component};
//# sourceMappingURL=OneShot-f3dab7ba.js.map
