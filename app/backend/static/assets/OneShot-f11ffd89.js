import{bD as K,bE as e,r as n}from"./vendor-7810ac01.js";import{a as xe,R as _e,G as Te,V as L,u as x,S as fe,Q as je,E as be,A as Ae,b as _,c as ye,d as Pe,e as ke,f as Ge,r as Q,i as Ie,g as q,h as we,j as Re}from"./index-3af1e006.js";import{h as H,L as Ne,i as Ve,j as Fe,k as M,l as Be,m as De,n as Ee,o as Oe,f as Ue,D as Le,T as J,g as Qe,e as T}from"./fluentui-react-a9deded4.js";import"./fluentui-icons-fd0855c4.js";const qe="_oneshotContainer_p6613_1",He="_oneshotTopSection_p6613_8",Me="_oneshotBottomSection_p6613_15",Je="_oneshotTitle_p6613_25",Ke="_oneshotQuestionInput_p6613_39",ze="_oneshotAnswerContainer_p6613_46",We="_oneshotAnalysisPanel_p6613_53",Xe="_oneshotSettingsSeparator_p6613_58",Ye="_settingsButton_p6613_62",a={oneshotContainer:qe,oneshotTopSection:He,oneshotBottomSection:Me,oneshotTitle:Je,oneshotQuestionInput:Ke,oneshotAnswerContainer:ze,oneshotAnalysisPanel:We,oneshotSettingsSeparator:Xe,settingsButton:Ye},Ze=()=>{const{instance:m}=K(),c=m.getActiveAccount(),u=s=>typeof s=="string"?s:JSON.stringify(s),g=(s=>Object.keys(s??{}).map(i=>{let d=i;try{const p=new URL(i).pathname.split("/");i=p[p.length-1]}catch{}return{name:i,value:u((s??{})[d])}}))(c?.idTokenClaims??xe?.user_claims),I=[H({columnId:"name",compare:(s,i)=>s.name.localeCompare(i.name),renderHeaderCell:()=>"Name",renderCell:s=>s.name}),H({columnId:"value",compare:(s,i)=>s.value.localeCompare(i.value),renderHeaderCell:()=>"Value",renderCell:s=>s.value})];return e.jsxs("div",{children:[e.jsx(Ne,{children:"ID Token Claims"}),e.jsxs(Ve,{items:g,columns:I,sortable:!0,getRowId:s=>s.name,children:[e.jsx(Fe,{children:e.jsx(M,{children:({renderHeaderCell:s})=>e.jsx(Be,{children:s()})})}),e.jsx(De,{children:({item:s,rowId:i})=>e.jsx(M,{children:({renderCell:d})=>e.jsx(Ee,{children:d(s)})},i)})]})]})};function $e(){const[m,c]=n.useState(!1),[u,G]=n.useState(""),[g,I]=n.useState(""),[s,i]=n.useState(""),[d,f]=n.useState(_e.Hybrid),[p,z]=n.useState(3),[j,W]=n.useState(!0),[w,X]=n.useState(!1),[S,Y]=n.useState(!1),[R,Z]=n.useState(Te.TextAndImages),[N,$]=n.useState(""),[ee,te]=n.useState(""),[se,ne]=n.useState([L.Embedding,L.ImageEmbedding]),[V,oe]=n.useState(!1),[F,ae]=n.useState(!1),[B,ie]=n.useState(!1),b=n.useRef(""),[A,D]=n.useState(!1),[C,E]=n.useState(),[r,re]=n.useState(),[O,U]=n.useState(),[v,h]=n.useState(void 0),l=x?K().instance:void 0,le=async()=>{const t=l?await q(l):void 0;we(t).then(o=>{ie(o.showGPT4VOptions)})};n.useEffect(()=>{le()},[]);const y=async t=>{b.current=t,C&&E(void 0),D(!0),U(void 0),h(void 0);const o=l?await q(l):void 0;try{const k={messages:[{content:t,role:"user"}],context:{overrides:{prompt_template:u.length===0?void 0:u,prompt_template_prefix:g.length===0?void 0:g,prompt_template_suffix:s.length===0?void 0:s,exclude_category:N.length===0?void 0:N,top:p,retrieval_mode:d,semantic_ranker:j,semantic_captions:w,use_oid_security_filter:V,use_groups_security_filter:F,vector_fields:se,use_gpt4v:S,gpt4v_input:R}},session_state:r?r.choices[0].session_state:null},ve=await Re(k,o);re(ve)}catch(k){E(k)}finally{D(!1)}},ce=(t,o)=>{G(o||"")},ue=(t,o)=>{z(parseInt(o||"3"))},de=(t,o)=>{W(!!o)},pe=(t,o)=>{X(!!o)},he=(t,o)=>{$(o||"")},me=t=>{y(t),te(t)},ge=t=>{O===t&&v===_.CitationTab?h(void 0):(U(t),h(_.CitationTab))},P=t=>{h(v===t?void 0:t)},Se=(t,o)=>{oe(!!o)},Ce=(t,o)=>{ae(!!o)};return e.jsxs("div",{className:a.oneshotContainer,children:[e.jsxs("div",{className:a.oneshotTopSection,children:[e.jsx(fe,{className:a.settingsButton,onClick:()=>c(!m)}),e.jsx("h1",{className:a.oneshotTitle,children:"Dúvidas sobre o Sinacor?"}),e.jsx("div",{className:a.oneshotQuestionInput,children:e.jsx(je,{placeholder:"Digite uma pergunta (por exemplo, o que são os eventos corporativos?)",disabled:A,initQuestion:ee,onSend:t=>y(t)})})]}),e.jsxs("div",{className:a.oneshotBottomSection,children:[A&&e.jsx(Oe,{label:"Respondendo"}),!b.current&&e.jsx(be,{onExampleClicked:me,useGPT4V:S}),!A&&r&&!C&&e.jsx("div",{className:a.oneshotAnswerContainer,children:e.jsx(Ae,{answer:r,isStreaming:!1,onCitationClicked:t=>ge(t),onThoughtProcessClicked:()=>P(_.ThoughtProcessTab),onSupportingContentClicked:()=>P(_.SupportingContentTab)})}),C?e.jsx("div",{className:a.oneshotAnswerContainer,children:e.jsx(ye,{error:C.toString(),onRetry:()=>y(b.current)})}):null,v&&r&&e.jsx(Pe,{className:a.oneshotAnalysisPanel,activeCitation:O,onActiveTabChanged:t=>P(t),citationHeight:"600px",answer:r,activeTab:v})]}),e.jsxs(Ue,{headerText:"Configurar a geração de respostas",isOpen:m,isBlocking:!1,onDismiss:()=>c(!1),closeButtonAriaLabel:"Fechar",onRenderFooterContent:()=>e.jsx(Le,{onClick:()=>c(!1),children:"Fechar"}),isFooterAtBottom:!0,children:[e.jsx(J,{className:a.oneshotSettingsSeparator,defaultValue:u,label:"Substituir modelo de prompt",multiline:!0,autoAdjustHeight:!0,onChange:ce}),e.jsx(Qe,{className:a.oneshotSettingsSeparator,label:"Resultados de pesquisa a recuperar",min:1,max:50,defaultValue:p.toString(),onChange:ue}),e.jsx(J,{className:a.oneshotSettingsSeparator,label:"Excluir categoria",onChange:he}),e.jsx(T,{className:a.oneshotSettingsSeparator,checked:j,label:"Usar classificador semântico na pesquisa",onChange:de}),e.jsx(T,{className:a.oneshotSettingsSeparator,checked:w,label:"Pesquisas contextuais resumidas ao invés de documentos completos",onChange:pe,disabled:!j}),B&&e.jsx(ke,{gpt4vInputs:R,isUseGPT4V:S,updateUseGPT4V:t=>{Y(t)},updateGPT4VInputs:t=>Z(t)}),e.jsx(Ge,{showImageOptions:S&&B,updateVectorFields:t=>ne(t),updateRetrievalMode:t=>f(t)}),x&&e.jsx(T,{className:a.oneshotSettingsSeparator,checked:V,label:"Filtro de segurança oid",disabled:!l?.getActiveAccount(),onChange:Se}),x&&e.jsx(T,{className:a.oneshotSettingsSeparator,checked:F||Q,label:"Filtro de segurança de grupos",disabled:!Ie(l)||Q,onChange:Ce}),x&&e.jsx(Ze,{})]})]})}$e.displayName="OneShot";export{$e as Component};
//# sourceMappingURL=OneShot-f11ffd89.js.map
