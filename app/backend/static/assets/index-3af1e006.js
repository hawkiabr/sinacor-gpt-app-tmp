import{bD as pe,bE as e,bF as pt,bG as we,bH as gt,bI as mt,r as c,bJ as Re,bK as _t,bL as xt,bM as ft,bN as vt,bO as St,bP as yt,bQ as Ct,bR as jt,bS as bt,bT as Tt,bU as wt,bV as Ne,bW as Nt}from"./vendor-7810ac01.js";import{D as Be,S,I as Le,P as Lt,T as le,a as kt,B as ge,b as At,c as re,d as Fe,C as Pt,e as M,f as It,g as Et}from"./fluentui-react-a9deded4.js";import{e as Mt,E as qt,f as Rt,g as Bt,D as Ft,h as Gt}from"./fluentui-icons-fd0855c4.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();const $t=".auth/me",Ot=".auth/refresh",Ut=".auth/logout?post_logout_redirect_uri=/";async function Vt(){const t=await fetch("/auth_setup");if(!t.ok)throw new Error(`auth setup response was not ok: ${t.status}`);return await t.json()}const $=await Vt(),F=$.useLogin,H=$.requireAccessControl,Qt=$.msalConfig,Ht=$.loginRequest,Dt=$.tokenRequest,Ge=()=>window.location.origin+$.msalConfig.auth.redirectUri,zt=()=>fetch(Ot).then(t=>t.ok?fetch($t).then(s=>s.ok?s.json().then(n=>n.length>0?{id_token:n[0].id_token,access_token:n[0].access_token,user_claims:n[0].user_claims.reduce((i,o)=>(i[o.typ]=o.val,i),{})}:null):null):null),G=await zt(),Kt=()=>{window.location.href=Ut},ue=t=>t?.getActiveAccount()!=null||G!=null,ke=t=>G?Promise.resolve(G.access_token):t.acquireTokenSilent({...Dt,redirectUri:Ge()}).then(s=>s.accessToken).catch(s=>{console.log(s)});const Wt="_layout_rjvu3_1",Jt="_header_rjvu3_7",Xt="_headerContainer_rjvu3_12",Yt="_headerTitleContainer_rjvu3_20",Zt="_headerLogo_rjvu3_28",es="_headerTitle_rjvu3_20",ts="_headerNavList_rjvu3_37",ss="_headerNavPageLink_rjvu3_43",ns="_headerNavPageLinkActive_rjvu3_57",os="_headerNavLeftMargin_rjvu3_62",as="_headerRightText_rjvu3_66",rs="_microsoftLogo_rjvu3_71",is="_githubLogo_rjvu3_76",cs="_hawkiaLogo_rjvu3_80",ls="_b3Logo_rjvu3_84",b={layout:Wt,header:Jt,headerContainer:Xt,headerTitleContainer:Yt,headerLogo:Zt,headerTitle:es,headerNavList:ts,headerNavPageLink:ss,headerNavPageLinkActive:ns,headerNavLeftMargin:os,headerRightText:as,microsoftLogo:rs,githubLogo:is,hawkiaLogo:cs,b3Logo:ls},us="_loginButton_m8yze_1",Ae={loginButton:us},ds="/assets/b3-3b03ba21.svg",hs=()=>{const{instance:t}=pe(),s=t.getActiveAccount(),n=(s||G)!=null,i=()=>{t.loginPopup({...Ht,redirectUri:Ge()}).catch(d=>console.log(d))},o=()=>{s?t.logoutPopup({mainWindowRedirectUri:"/",account:t.getActiveAccount()}).catch(d=>console.log(d)):Kt()},l=`Logout
${s?.username??G?.user_claims?.preferred_username}`;return e.jsx(Be,{text:n?l:"Login",className:Ae.loginButton,onClick:n?o:i,children:e.jsx("img",{src:ds,alt:"B3 logo","aria-label":"B3",width:"20px",height:"20px",className:Ae.b3Logo})})},Pe=()=>e.jsxs("div",{className:b.layout,children:[e.jsx("header",{className:b.header,role:"banner",children:e.jsxs("div",{className:b.headerContainer,children:[e.jsx(pt,{to:"/",className:b.headerTitleContainer,children:e.jsx("h3",{className:b.headerTitle,children:"Sinacor GPT"})}),e.jsx("nav",{children:e.jsxs("ul",{className:b.headerNavList,children:[e.jsx("li",{children:e.jsx(we,{to:"/",className:({isActive:t})=>t?b.headerNavPageLinkActive:b.headerNavPageLink,children:"Chat"})}),e.jsx("li",{className:b.headerNavLeftMargin,children:e.jsx(we,{to:"/qa",className:({isActive:t})=>t?b.headerNavPageLinkActive:b.headerNavPageLink,children:"Perguntas"})})]})}),e.jsx("h4",{className:b.headerRightText,children:"Ambiente PoC"}),F&&e.jsx(hs,{})]})}),e.jsx(gt,{})]}),ps="_container_18ti9_1",gs="_chatRoot_18ti9_8",ms="_chatContainer_18ti9_13",_s="_chatEmptyState_18ti9_21",xs="_chatEmptyStateTitle_18ti9_31",fs="_chatEmptyStateSubtitle_18ti9_38",vs="_chatMessageStream_18ti9_54",Ss="_chatMessageGpt_18ti9_66",ys="_chatMessageGptMinWidth_18ti9_73",Cs="_chatInput_18ti9_78",js="_chatAnalysisPanel_18ti9_91",bs="_chatSettingsSeparator_18ti9_99",Ts="_loadingLogo_18ti9_103",ws="_commandsContainer_18ti9_107",Ns="_commandButton_18ti9_112",u={container:ps,chatRoot:gs,chatContainer:ms,chatEmptyState:_s,chatEmptyStateTitle:xs,chatEmptyStateSubtitle:fs,chatMessageStream:vs,chatMessageGpt:Ss,chatMessageGptMinWidth:ys,chatInput:Cs,chatAnalysisPanel:js,chatSettingsSeparator:bs,loadingLogo:Ts,commandsContainer:ws,commandButton:Ns},ee="";function me(t){var s={"Content-Type":"application/json"};return F&&G==null&&t&&(s.Authorization=`Bearer ${t}`),s}async function $n(t,s){const n=await fetch(`${ee}/ask`,{method:"POST",headers:me(s),body:JSON.stringify(t)}),i=await n.json();if(n.status>299||!n.ok)throw Error(i.error||"Unknown error");return i}async function Ls(t){return await(await fetch(`${ee}/config`,{method:"GET",headers:me(t)})).json()}async function ks(t,s){return await fetch(`${ee}/chat`,{method:"POST",headers:me(s),body:JSON.stringify(t)})}function $e(t){return`${ee}/content/${t}`}var C=(t=>(t.Hybrid="hybrid",t.Vectors="vectors",t.Text="text",t))(C||{}),P=(t=>(t.TextAndImages="textAndImages",t.Images="images",t.Texts="texts",t))(P||{}),N=(t=>(t.Embedding="embedding",t.ImageEmbedding="imageEmbedding",t.Both="both",t))(N||{});const As="_answerContainer_1sqax_1",Ps="_answerLogo_1sqax_11",Is="_answerText_1sqax_15",Es="_selected_1sqax_34",Ms="_citationLearnMore_1sqax_38",qs="_citation_1sqax_38",Rs="_followupQuestionsList_1sqax_60",Bs="_followupQuestionLearnMore_1sqax_64",Fs="_followupQuestion_1sqax_60",Gs="_supContainer_1sqax_83",$s="_retryButton_1sqax_112",Os="_loadingdots_1sqax_134",Us="_loading_1sqax_134",y={answerContainer:As,answerLogo:Ps,answerText:Is,selected:Es,citationLearnMore:Ms,citation:qs,followupQuestionsList:Rs,followupQuestionLearnMore:Bs,followupQuestion:Fs,supContainer:Gs,retryButton:$s,loadingdots:Os,loading:Us};function Vs(t,s,n){const i=[];let o=t.trim();if(s){let h=o.length;for(let p=o.length-1;p>=0&&o[p]!=="]";p--)if(o[p]==="["){h=p;break}o=o.substring(0,h)}return{answerHtml:o.split(/\[([^\]]+)\]/g).map((h,m)=>{if(m%2===0)return h;{let p;i.indexOf(h)!==-1?p=i.indexOf(h)+1:(i.push(h),p=i.length);const g=$e(h);return mt(e.jsx("a",{className:"supContainer",title:h,onClick:()=>n(g),children:e.jsx("sup",{children:p})}))}}).join(""),citations:i}}const Oe=()=>e.jsx(Mt,{primaryFill:"rgba(115, 118, 225, 1)","aria-hidden":"true","aria-label":"Answer logo"}),Ie=({answer:t,isSelected:s,isStreaming:n,onCitationClicked:i,onThoughtProcessClicked:o,onSupportingContentClicked:l,onFollowupQuestionClicked:d,showFollowupQuestions:h})=>{const m=t.choices[0].context.followup_questions,p=t.choices[0].message.content,g=c.useMemo(()=>Vs(p,n,i),[t]),_=Re.sanitize(g.answerHtml);return e.jsxs(S,{className:`${y.answerContainer} ${s&&y.selected}`,verticalAlign:"space-between",children:[e.jsx(S.Item,{children:e.jsxs(S,{horizontal:!0,horizontalAlign:"space-between",children:[e.jsx(Oe,{}),e.jsxs("div",{children:[e.jsx(Le,{style:{color:"black"},iconProps:{iconName:"Lightbulb"},title:"Mostrar processo de pensamento",ariaLabel:"Mostrar processo de pensamento",onClick:()=>o(),disabled:!t.choices[0].context.thoughts?.length}),e.jsx(Le,{style:{color:"black"},iconProps:{iconName:"ClipboardList"},title:"Mostrar conteúdo de apoio",ariaLabel:"Mostrar conteúdo de apoio",onClick:()=>l(),disabled:!t.choices[0].context.data_points})]})]})}),e.jsx(S.Item,{grow:!0,children:e.jsx("div",{className:y.answerText,dangerouslySetInnerHTML:{__html:_}})}),!!g.citations.length&&e.jsx(S.Item,{children:e.jsxs(S,{horizontal:!0,wrap:!0,tokens:{childrenGap:5},children:[e.jsx("span",{className:y.citationLearnMore,children:"Saiba mais:"}),g.citations.map((f,T)=>{const A=$e(f);return e.jsx("a",{className:y.citation,title:f,onClick:()=>i(A),children:`${++T}. ${f}`},T)})]})}),!!m?.length&&h&&d&&e.jsx(S.Item,{children:e.jsxs(S,{horizontal:!0,wrap:!0,className:`${g.citations.length?y.followupQuestionsList:""}`,tokens:{childrenGap:6},children:[e.jsx("span",{className:y.followupQuestionLearnMore,children:"Follow-ups:"}),m.map((f,T)=>e.jsx("a",{className:y.followupQuestion,title:f,onClick:()=>d(f),children:`${f}`},T))]})})]})},Qs=()=>{const t=_t({from:{opacity:0},to:{opacity:1}});return e.jsx(xt.div,{style:{...t},children:e.jsxs(S,{className:y.answerContainer,verticalAlign:"space-between",children:[e.jsx(Oe,{}),e.jsx(S.Item,{grow:!0,children:e.jsxs("p",{className:y.answerText,children:["Respondendo",e.jsx("span",{className:y.loadingdots})]})})]})})},Hs=({error:t,onRetry:s})=>e.jsxs(S,{className:y.answerContainer,verticalAlign:"space-between",children:[e.jsx(qt,{"aria-hidden":"true","aria-label":"Error icon",primaryFill:"red"}),e.jsx(S.Item,{grow:!0,children:e.jsx("p",{className:y.answerText,children:t})}),e.jsx(Lt,{className:y.retryButton,onClick:s,text:"Tente novamente"})]}),Ds="_questionInputContainer_hiipw_1",zs="_questionInputTextArea_hiipw_12",Ks="_questionInputButtonsContainer_hiipw_17",ie={questionInputContainer:Ds,questionInputTextArea:zs,questionInputButtonsContainer:Ks},Ws=({onSend:t,disabled:s,placeholder:n,clearOnSend:i,initQuestion:o})=>{const[l,d]=c.useState("");c.useEffect(()=>{o&&d(o)},[o]);const h=()=>{s||!l.trim()||(t(l),i&&d(""))},m=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),h())},p=(T,A)=>{A?A.length<=1e3&&d(A):d("")},{instance:g}=pe(),_=H&&!ue(g),f=s||!l.trim()||_;return _&&(n="Please login to continue..."),e.jsxs(S,{horizontal:!0,className:ie.questionInputContainer,children:[e.jsx(le,{className:ie.questionInputTextArea,disabled:_,placeholder:n,multiline:!0,resizable:!1,borderless:!0,value:l,onChange:p,onKeyDown:m}),e.jsx("div",{className:ie.questionInputButtonsContainer,children:e.jsx(kt,{content:"Faça uma pergunta",relationship:"label",children:e.jsx(ge,{size:"large",icon:e.jsx(Rt,{primaryFill:"rgba(115, 118, 225, 1)"}),disabled:f,onClick:h})})})]})},Js="_examplesNavList_o3hyg_1",Xs="_example_o3hyg_1",Ys="_exampleText_o3hyg_29",de={examplesNavList:Js,example:Xs,exampleText:Ys},Zs=({text:t,value:s,onClick:n})=>e.jsx("div",{className:de.example,onClick:()=>n(s),children:e.jsx("p",{className:de.exampleText,children:t})}),en=["Quais são os principais componentes do FixGear?","Qual consulta valida se o módulo de Faturamento BMF está instalado?","É possível liquidar contratos comprados a termo?"],tn=["Compare the impact of interest rates and GDP in financial markets.","What is the expected trend for the S&P 500 index over the next five years? Compare it to the past S&P 500 performance","Can you identify any correlation between oil prices and stock market trends?"],sn=({onExampleClicked:t,useGPT4V:s})=>e.jsx("ul",{className:de.examplesNavList,children:(s?tn:en).map((n,i)=>e.jsx("li",{children:e.jsx(Zs,{text:n,value:n,onClick:t})},i))}),nn="_container_1p3pb_1",on="_message_1p3pb_9",Ee={container:nn,message:on},Z=({message:t})=>e.jsx("div",{className:Ee.container,children:e.jsx("div",{className:Ee.message,children:t})}),an="_thoughtProcess_ymetq_1",rn="_tList_ymetq_9",cn="_tListItem_ymetq_15",ln="_tStep_ymetq_41",un="_tCodeBlock_ymetq_47",dn="_tProp_ymetq_51",hn="_citationImg_ymetq_59",B={thoughtProcess:an,tList:rn,tListItem:cn,tStep:ln,tCodeBlock:un,tProp:dn,citationImg:hn};function pn(t){const s=t.split(": "),n=s[0],i=Re.sanitize(s.slice(1).join(": "));return{title:n,content:i}}const gn="_supportingContentNavList_1tkw1_1",mn="_supportingContentItem_1tkw1_9",_n="_supportingContentItemHeader_1tkw1_23",xn="_supportingContentItemText_1tkw1_28",fn="_supportingContentItemImage_1tkw1_34",D={supportingContentNavList:gn,supportingContentItem:mn,supportingContentItemHeader:_n,supportingContentItemText:xn,supportingContentItemImage:fn},vn=({supportingContent:t})=>{const s=Array.isArray(t)?t:t.text,n=Array.isArray(t)?[]:t?.images;return e.jsxs("ul",{className:D.supportingContentNavList,children:[s.map(i=>{const o=pn(i);return e.jsx(Sn,{...o})}),n?.map(i=>e.jsx("img",{className:D.supportingContentItemImage,src:i.url}))]})},Sn=({title:t,content:s})=>e.jsxs("li",{className:D.supportingContentItem,children:[e.jsx("h4",{className:D.supportingContentItemHeader,children:t}),e.jsx("p",{className:D.supportingContentItemText,dangerouslySetInnerHTML:{__html:s}})]});var L=(t=>(t.ThoughtProcessTab="thoughtProcess",t.SupportingContentTab="supportingContent",t.CitationTab="citation",t))(L||{});const yn=({thoughts:t})=>e.jsx("ul",{className:B.tList,children:t.map(s=>e.jsxs("li",{className:B.tListItem,children:[e.jsx("div",{className:B.tStep,children:s.title}),Array.isArray(s.description)?e.jsx(ft,{language:"json",wrapLongLines:!0,className:B.tCodeBlock,children:JSON.stringify(s.description,null,2)}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:s.description}),e.jsx(S,{horizontal:!0,tokens:{childrenGap:5},children:s.props&&(Object.keys(s.props)||[]).map(n=>e.jsxs("span",{className:B.tProp,children:[n,": ",JSON.stringify(s.props?.[n])]}))})]})]}))}),ce={disabled:!0,style:{color:"grey"}},Cn=({answer:t,activeTab:s,activeCitation:n,citationHeight:i,className:o,onActiveTabChanged:l})=>{const d=!t.choices[0].context.thoughts,h=!t.choices[0].context.data_points,m=!n;return e.jsxs(At,{className:o,selectedKey:s,onLinkClick:p=>p&&l(p.props.itemKey),children:[e.jsx(re,{itemKey:L.ThoughtProcessTab,headerText:"Processo de pensamento",headerButtonProps:d?ce:void 0,children:e.jsx(yn,{thoughts:t.choices[0].context.thoughts||[]})}),e.jsx(re,{itemKey:L.SupportingContentTab,headerText:"Conteúdo de apoio",headerButtonProps:h?ce:void 0,children:e.jsx(vn,{supportingContent:t.choices[0].context.data_points})}),e.jsx(re,{itemKey:L.CitationTab,headerText:"Citação",headerButtonProps:m?ce:void 0,children:n?.endsWith(".png")?e.jsx("img",{src:n,className:B.citationImg}):e.jsx("iframe",{title:"Citation",src:n,width:"100%",height:i})})]})},jn="_container_cfwv2_1",bn={container:jn},Tn=({className:t,onClick:s})=>e.jsx("div",{className:`${bn.container} ${t??""}`,children:e.jsx(ge,{icon:e.jsx(Bt,{}),onClick:s,children:"Configurações"})}),wn="_container_cfwv2_1",Nn={container:wn},Ln=({className:t,disabled:s,onClick:n})=>e.jsx("div",{className:`${Nn.container} ${t??""}`,children:e.jsx(ge,{icon:e.jsx(Ft,{}),disabled:s,onClick:n,children:"Limpar chat"})}),kn="_container_1pzrp_1",Me={container:kn},An=[{key:N.Embedding,text:"Text Embeddings"},{key:N.ImageEmbedding,text:"Image Embeddings"},{key:N.Both,text:"Text and Image embeddings"}],Pn=({updateRetrievalMode:t,updateVectorFields:s,showImageOptions:n})=>{const[i,o]=c.useState(C.Hybrid),[l,d]=c.useState(),h=(p,g)=>{o(g?.data||C.Hybrid),t(g?.data||C.Hybrid)},m=(p,g)=>{g&&d(g.key);let _;g?.key==="both"?_=[N.Embedding,N.ImageEmbedding]:_=[g?.key],s(_)};return c.useEffect(()=>{s(n?[N.Embedding,N.ImageEmbedding]:[N.Embedding])},[n]),e.jsxs(S,{className:Me.container,tokens:{childrenGap:10},children:[e.jsx(Fe,{className:Me.oneshotSettingsSeparator,label:"Modo de pesquisa (retrieval)",options:[{key:"hybrid",text:"Vectors + Text (Hybrid)",selected:i==C.Hybrid,data:C.Hybrid},{key:"vectors",text:"Vectors",selected:i==C.Vectors,data:C.Vectors},{key:"text",text:"Text",selected:i==C.Text,data:C.Text}],required:!0,onChange:h}),n&&[C.Vectors,C.Hybrid].includes(i)&&e.jsx(Pt,{options:An,onChange:m,selectedKey:l,defaultSelectedKey:N.Both,label:"Vector Fields (Multi-query vector search)"})]})},In="_container_1pzrp_1",qe={container:In},En=({updateGPT4VInputs:t,updateUseGPT4V:s,isUseGPT4V:n,gpt4vInputs:i})=>{const[o,l]=c.useState(n),[d,h]=c.useState(i||P.TextAndImages),m=(g,_)=>{s(!!_),l(!!_)},p=(g,_)=>{if(_){const f=_.key;t(f||P.TextAndImages),f&&h(f)}};return c.useEffect(()=>{o&&t(P.TextAndImages)},[o]),e.jsxs(S,{className:qe.container,tokens:{childrenGap:10},children:[e.jsx(M,{checked:o,label:"Use GPT-4 Turbo with Vision",onChange:m}),o&&e.jsx(Fe,{selectedKey:d,className:qe.oneshotSettingsSeparator,label:"GPT-4 Turbo with Vision Inputs",options:[{key:P.TextAndImages,text:"Images and text from index"},{text:"Images only",key:P.Images},{text:"Text only",key:P.Texts}],required:!0,onChange:p})]})},Mn=()=>{const[t,s]=c.useState(!1),[n,i]=c.useState(""),[o,l]=c.useState(3),[d,h]=c.useState(C.Hybrid),[m,p]=c.useState(!0),[g,_]=c.useState(!0),[f,T]=c.useState(!1),[A,Ue]=c.useState(""),[z,Ve]=c.useState(!1),[Qe,He]=c.useState([N.Embedding]),[_e,De]=c.useState(!1),[xe,ze]=c.useState(!1),[fe,Ke]=c.useState(P.TextAndImages),[K,We]=c.useState(!1),I=c.useRef(""),te=c.useRef(null),[W,J]=c.useState(!1),[ve,se]=c.useState(!1),[X,ne]=c.useState(),[Se,oe]=c.useState(),[O,q]=c.useState(void 0),[U,ye]=c.useState(0),[j,Y]=c.useState([]),[Ce,je]=c.useState([]),[be,Je]=c.useState(!1),Xe=async()=>{const a=R?await ke(R):void 0;Ls(a).then(r=>{Je(r.showGPT4VOptions)})},Ye=async(a,r,w,ae)=>{let k="",x={};const ut=v=>new Promise(dt=>{setTimeout(()=>{k+=v;const ht={...x,choices:[{...x.choices[0],message:{content:k,role:x.choices[0].message.role}}]};je([...r,[a,ht]]),dt(null)},33)});try{se(!0);for await(const v of vt(ae))if(v.choices&&v.choices[0].context&&v.choices[0].context.data_points)v.choices[0].message=v.choices[0].delta,x=v;else if(v.choices&&v.choices[0].delta.content)J(!1),await ut(v.choices[0].delta.content);else if(v.choices&&v.choices[0].context)x.choices[0].context={...x.choices[0].context,...v.choices[0].context};else if(v.error)throw Error(v.error)}finally{se(!1)}return{...x,choices:[{...x.choices[0],message:{content:k,role:x.choices[0].message.role}}]}},R=F?pe().instance:void 0,V=async a=>{I.current=a,X&&ne(void 0),J(!0),oe(void 0),q(void 0);const r=R?await ke(R):void 0;try{const ae={messages:[...j.flatMap(x=>[{content:x[0],role:"user"},{content:x[1].choices[0].message.content,role:"assistant"}]),{content:a,role:"user"}],stream:g,context:{overrides:{prompt_template:n.length===0?void 0:n,exclude_category:A.length===0?void 0:A,top:o,retrieval_mode:d,semantic_ranker:m,semantic_captions:f,suggest_followup_questions:z,use_oid_security_filter:_e,use_groups_security_filter:xe,vector_fields:Qe,use_gpt4v:K,gpt4v_input:fe}},session_state:j.length?j[j.length-1][1].choices[0].session_state:null},k=await ks(ae,r);if(!k.body)throw Error("No response body");if(g){const x=await Ye(a,j,Y,k.body);Y([...j,[a,x]])}else{const x=await k.json();if(k.status>299||!k.ok)throw Error(x.error||"Unknown error");Y([...j,[a,x]])}}catch(w){ne(w)}finally{J(!1)}},Ze=()=>{I.current="",X&&ne(void 0),oe(void 0),q(void 0),Y([]),je([]),J(!1),se(!1)};c.useEffect(()=>te.current?.scrollIntoView({behavior:"smooth"}),[W]),c.useEffect(()=>te.current?.scrollIntoView({behavior:"auto"}),[Ce]),c.useEffect(()=>{Xe()},[]);const et=(a,r)=>{i(r||"")},tt=(a,r)=>{l(parseInt(r||"3"))},st=(a,r)=>{p(!!r)},nt=(a,r)=>{T(!!r)},ot=(a,r)=>{_(!!r)},at=(a,r)=>{Ue(r||"")},rt=(a,r)=>{Ve(!!r)},it=(a,r)=>{De(!!r)},ct=(a,r)=>{ze(!!r)},lt=a=>{V(a)},Te=(a,r)=>{Se===a&&O===L.CitationTab&&U===r?q(void 0):(oe(a),q(L.CitationTab)),ye(r)},Q=(a,r)=>{q(O===a&&U===r?void 0:a),ye(r)};return e.jsxs("div",{className:u.container,children:[e.jsxs("div",{className:u.commandsContainer,children:[e.jsx(Ln,{className:u.commandButton,onClick:Ze,disabled:!I.current||W}),e.jsx(Tn,{className:u.commandButton,onClick:()=>s(!t)})]}),e.jsxs("div",{className:u.chatRoot,children:[e.jsxs("div",{className:u.chatContainer,children:[I.current?e.jsxs("div",{className:u.chatMessageStream,children:[ve&&Ce.map((a,r)=>e.jsxs("div",{children:[e.jsx(Z,{message:a[0]}),e.jsx("div",{className:u.chatMessageGpt,children:e.jsx(Ie,{isStreaming:!0,answer:a[1],isSelected:!1,onCitationClicked:w=>Te(w,r),onThoughtProcessClicked:()=>Q(L.ThoughtProcessTab,r),onSupportingContentClicked:()=>Q(L.SupportingContentTab,r),onFollowupQuestionClicked:w=>V(w),showFollowupQuestions:z&&j.length-1===r},r)})]},r)),!ve&&j.map((a,r)=>e.jsxs("div",{children:[e.jsx(Z,{message:a[0]}),e.jsx("div",{className:u.chatMessageGpt,children:e.jsx(Ie,{isStreaming:!1,answer:a[1],isSelected:U===r&&O!==void 0,onCitationClicked:w=>Te(w,r),onThoughtProcessClicked:()=>Q(L.ThoughtProcessTab,r),onSupportingContentClicked:()=>Q(L.SupportingContentTab,r),onFollowupQuestionClicked:w=>V(w),showFollowupQuestions:z&&j.length-1===r},r)})]},r)),W&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{message:I.current}),e.jsx("div",{className:u.chatMessageGptMinWidth,children:e.jsx(Qs,{})})]}),X?e.jsxs(e.Fragment,{children:[e.jsx(Z,{message:I.current}),e.jsx("div",{className:u.chatMessageGptMinWidth,children:e.jsx(Hs,{error:X.toString(),onRetry:()=>V(I.current)})})]}):null,e.jsx("div",{ref:te})]}):e.jsxs("div",{className:u.chatEmptyState,children:[e.jsx(Gt,{fontSize:"120px",primaryFill:"rgba(115, 118, 225, 1)","aria-hidden":"true","aria-label":"Chat logo"}),e.jsx("h2",{className:u.chatEmptyStateTitle,children:"Converse sobre o Sinacor"}),e.jsx("h3",{className:u.chatEmptyStateSubtitle,children:"Pergunte qualquer coisa ou tente um exemplo"}),e.jsx(sn,{onExampleClicked:lt,useGPT4V:K})]}),e.jsx("div",{className:u.chatInput,children:e.jsx(Ws,{clearOnSend:!0,placeholder:"Digite uma pergunta (por exemplo, quem é responsável pelo cadastro de novos bancos?)",disabled:W,onSend:a=>V(a)})})]}),j.length>0&&O&&e.jsx(Cn,{className:u.chatAnalysisPanel,activeCitation:Se,onActiveTabChanged:a=>Q(a,U),citationHeight:"810px",answer:j[U][1],activeTab:O}),e.jsxs(It,{headerText:"Configurar a geração de respostas",isOpen:t,isBlocking:!1,onDismiss:()=>s(!1),closeButtonAriaLabel:"Fechar",onRenderFooterContent:()=>e.jsx(Be,{onClick:()=>s(!1),children:"Fechar"}),isFooterAtBottom:!0,children:[e.jsx(le,{className:u.chatSettingsSeparator,defaultValue:n,label:"Substituir modelo de prompt",multiline:!0,autoAdjustHeight:!0,onChange:et}),e.jsx(Et,{className:u.chatSettingsSeparator,label:"Resultados de pesquisa a recuperar",min:1,max:50,defaultValue:o.toString(),onChange:tt}),e.jsx(le,{className:u.chatSettingsSeparator,label:"Excluir categoria",onChange:at}),e.jsx(M,{className:u.chatSettingsSeparator,checked:m,label:"Usar classificador semântico na pesquisa",onChange:st}),e.jsx(M,{className:u.chatSettingsSeparator,checked:f,label:"Pesquisas contextuais resumidas ao invés de documentos completos",onChange:nt,disabled:!m}),e.jsx(M,{className:u.chatSettingsSeparator,checked:z,label:"Perguntas de follow-up",onChange:rt}),be&&e.jsx(En,{gpt4vInputs:fe,isUseGPT4V:K,updateUseGPT4V:a=>{We(a)},updateGPT4VInputs:a=>Ke(a)}),e.jsx(Pn,{showImageOptions:K&&be,updateVectorFields:a=>He(a),updateRetrievalMode:a=>h(a)}),F&&e.jsx(M,{className:u.chatSettingsSeparator,checked:_e||H,label:"Filtro de segurança oid",disabled:!ue(R)||H,onChange:it}),F&&e.jsx(M,{className:u.chatSettingsSeparator,checked:xe||H,label:"Filtro de segurança de grupos",disabled:!ue(R)||H,onChange:ct}),e.jsx(M,{className:u.chatSettingsSeparator,checked:g,label:"Streaming de respostas (chat)",onChange:ot})]})]})]})};var he;if(F){var E=new St(Qt);!E.getActiveAccount()&&E.getAllAccounts().length>0&&E.setActiveAccount(E.getActiveAccount()),E.addEventCallback(t=>{if(t.eventType===yt.LOGIN_SUCCESS&&t.payload){const s=t.payload;E.setActiveAccount(s)}}),he=e.jsx(Nt,{instance:E,children:e.jsx(Pe,{})})}else he=e.jsx(Pe,{});Ct();const qn=jt([{path:"/",element:he,children:[{index:!0,element:e.jsx(Mn,{})},{path:"qa",lazy:()=>Ne(()=>import("./OneShot-f11ffd89.js"),["assets/OneShot-f11ffd89.js","assets/vendor-7810ac01.js","assets/fluentui-react-a9deded4.js","assets/fluentui-icons-fd0855c4.js","assets/OneShot-daa12333.css"])},{path:"*",lazy:()=>Ne(()=>import("./NoPage-ea4b1efc.js"),["assets/NoPage-ea4b1efc.js","assets/vendor-7810ac01.js"])}]}]);bt.createRoot(document.getElementById("root")).render(e.jsx(Tt.StrictMode,{children:e.jsx(wt,{router:qn})}));export{Ie as A,sn as E,P as G,Ws as Q,C as R,Tn as S,N as V,G as a,L as b,Hs as c,Cn as d,En as e,Pn as f,ke as g,Ls as h,ue as i,$n as j,H as r,F as u};
//# sourceMappingURL=index-3af1e006.js.map
